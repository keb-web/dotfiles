"use strict";var g=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var x=(e,t)=>{for(var s in t)g(e,s,{get:t[s],enumerable:!0})},D=(e,t,s,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of P(t))!I.call(e,i)&&i!==s&&g(e,i,{get:()=>t[i],enumerable:!(l=A(t,i))||l.enumerable});return e};var j=e=>D(g({},"__esModule",{value:!0}),e);var J={};x(J,{default:()=>S});module.exports=j(J);var o=require("@raycast/api"),f=require("react");var h=require("@raycast/api"),k=require("path"),w=require("fs/promises"),L=require("child_process");async function E(e,...t){let s=(0,k.join)(h.environment.assetsPath,"compiled_raycast_swift/MyExecutable");return await(0,w.chmod)(s,"755"),new Promise((l,i)=>{let y=[e];for(let a of t)try{y.push(JSON.stringify(a,(c,m)=>m===void 0?null:m))}catch(c){i(new p("Failed to serialize input to JSON: "+c.message));return}let d=(0,L.spawn)(s,y),n=[],u=[];d.stdout?.on("data",a=>{n.push(a.toString())}),d.stderr?.on("data",a=>{u.push(a.toString())}),d.on("exit",a=>{if(a===0)try{let c=n.join("").trim();c.length!=0?l(JSON.parse(c)):l(null)}catch(c){let m=new p("Failed to deserialize result from JSON: "+c.message);m.stdout=n.join("").trim(),m.stderr=u.join("").trim(),i(m)}else{let c=new p(u.join("").trim()||n.join("").trim()||"Could not get any data");c.stdout=n.join("").trim(),c.stderr=u.join("").trim(),i(c)}}),d.on("error",a=>{i(a)})})}async function b(e){return await E("handler",e)}var p=class extends Error{constructor(t){super(t),this.name="SwiftError"}};var r=require("react/jsx-runtime"),F=[{display:"15 seconds",seconds:15,icon:"\u{1FAA5}"},{display:"30 seconds",seconds:30,icon:"\u{1F9FD}"},{display:"1 minute",seconds:60,icon:"\u{1F9FC}"},{display:"2 minutes",seconds:120,icon:"\u{1F6BF}"},{display:"5 minutes",seconds:300,icon:"\u{1F6C1}"}];function S(){let[e,t]=(0,f.useState)(!1),[s,l]=(0,f.useState)(null),[i,y]=(0,f.useState)(null),d=n=>{let u=new o.Toast({title:"Keyboard Locked"});b(n.seconds),l(n.seconds),y(n.icon),t(!0),u.show()};return(0,f.useEffect)(()=>{let n=setInterval(()=>{e&&s&&(l(s-1),s-1===0&&t(!1))},1e3);return()=>clearInterval(n)},[e,s]),e?(0,r.jsx)(o.List,{children:(0,r.jsx)(o.List.EmptyView,{icon:i??"\u{1F9FC}",description:"Press \u2303 + U at any time to unlock keyboard.",title:`Cleaning keyboard${s?` for ${s} seconds `:""}`,actions:(0,r.jsxs)(o.ActionPanel,{children:[(0,r.jsx)(o.Action,{title:"Back",onAction:()=>t(!1)}),(0,r.jsx)(o.Action,{autoFocus:!1,title:"Unlock Keyboard",shortcut:{modifiers:["ctrl"],key:"u"},onAction:()=>t(!1)})]})})}):(0,r.jsx)(o.List,{filtering:!1,navigationTitle:"Lock keyboard for..",children:(0,r.jsx)(o.List.Section,{title:"Durations",children:F.map(n=>(0,r.jsx)(o.List.Item,{title:`Lock Keyboard for ${n.display}`,icon:n.icon,actions:(0,r.jsx)(o.ActionPanel,{children:(0,r.jsx)(o.Action,{title:"Lock Keyboard",icon:o.Icon.Lock,onAction:()=>d(n)})})},n.display+n.seconds))})})}
